#===============================================================================
# Portable 6502/65C02/65816 Assembler Definitions
#-------------------------------------------------------------------------------

# Update the followiung line to reflect where you have installed the ZIP file
# containing the JAVA classes.

65016_DIR	=	C:\Users\AV/\Desktop\65016PVBRAM5

#===============================================================================

65016_JAR	=	$(65016_DIR)/65xx.jar

AS65_CLASS	=	org.x6502.x65016.As65016

LK65_CLASS	=	org.x6502.x65016.Lk65016

LB65_CLASS	=	org.x6502.x65016.Lb65016

AS65		=	java -cp $(65016_JAR) $(AS65_CLASS)

LK65		=	java -cp $(65016_JAR) $(LK65_CLASS)

LB65		=	java -cp $(65016_JAR) $(LB65_CLASS)

RM		=	erase

#===============================================================================
# Rules
#-------------------------------------------------------------------------------

.asm.obj:
	$(AS65) $(AS65_FLAGS) $<
	
#===============================================================================
# Configuration
#-------------------------------------------------------------------------------

OBJS	= \
	boot.obj
	
LK65_FLAGS = \
	-bss $$00010000-$$EFFFFFFF -code $$FFFFF000-$$FFFFFFFF

#===============================================================================
# Targets
#-------------------------------------------------------------------------------

all:	boot.hex boot.bin boot.coe


boot.hex: $(OBJS)
	$(LK65) $(LK65_FLAGS) -hex -output $@ $(OBJS)

boot.bin: $(OBJS)
	$(LK65) $(LK65_FLAGS) -bin -output $@ $(OBJS)

#===============================================================================
# Utilities
#-------------------------------------------------------------------------------

clean:
	$(RM) $(OBJS)
	$(RM) *.bin
	$(RM) *.s19
	$(RM) *.lst
	$(RM) *.map
	$(RM) *.hex
	$(RM) *.coe

#===============================================================================
# Dependencies
#-------------------------------------------------------------------------------

boot.obj: \
	boot.asm

boot.coe: boot.bin
  bin2hex -2 boot